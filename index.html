<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
	   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

     <script src="blockly/blockly_uncompressed.js"></script>
     <script src="blockly/generators/javascript.js"></script>
     <script src="blockly/generators/javascript/logic.js"></script>
     <script src="blockly/generators/javascript/loops.js"></script>
     <script src="blockly/generators/javascript/math.js"></script>
     <script src="blockly/generators/javascript/text.js"></script>
     <script src="blockly/generators/javascript/lists.js"></script>
     <script src="blockly/generators/javascript/colour.js"></script>
     <script src="blockly/generators/javascript/variables.js"></script>
     <script src="blockly/generators/javascript/variables_dynamic.js"></script>
     <script src="blockly/generators/javascript/procedures.js"></script>
     <script src="blockly/msg/messages.js"></script>
     <script src="blockly/msg/js/es.js"></script>
     <script src="blockly/blocks/extensions.js"></script>
     <script src="blockly/blocks/logic.js"></script>
     <script src="blockly/blocks/loops.js"></script>
     <script src="blockly/blocks/math.js"></script>
     <script src="blockly/blocks/text.js"></script>
     <script src="blockly/blocks/lists.js"></script>
     <script src="blockly/blocks/colour.js"></script>
     <script src="blockly/blocks/variables.js"></script>
     <script src="blockly/blocks/variables_dynamic.js"></script>
     <script src="blockly/blocks/procedures.js"></script>
     <script src="blockly/blocks/pxt_blockly_functions.js"></script>
     <script src="blockly/bloques-personalizados/test_blocks.js"></script>
     <script src="blockly/bloques-personalizados/pxt_test_blocks.js"></script>

     <script src="pilas-engine/phaser.js"></script>
     <script src="pilas-engine/nineslice.js"></script>
     <script src="pilas-engine/pilas-engine.js"></script>

    <title>Pilas con Bloques</title>
  </head>

  <style media="screen">
    body {
      margin: 0;
      overflow: hidden;
    }

    #blockly {
      height: 100vh;
    }

    .flex {
      display: flex;
    }

    .flex1 {
      flex: 1;
    }

    .ba {
      border: 1px solid;
    }

    .pa {
      padding: 0.5em;
    }


  </style>

  <script type="text/javascript">

    function iniciar_pilas() {
      var pilas = pilasengine.iniciar(400, 300);

      pilas.onready = function() {
        let actor = pilas.actores.nave();
        actor.aprender("arrastrable");
      };
    }

    function iniciar_blockly() {
      workspace = Blockly.inject('blockly',
          {
            comments: false,
            collapse: false,
            grid:
              {
                spacing: 25,
                length: 5,
                colour: '#ccc',
                snap: true
              },
            horizontalLayout: true,
            media: 'blockly/media/',
            oneBasedIndex: true,
            scrollbars: true,
            toolbox: document.getElementById('toolbox'),
            toolboxPosition: 'start',
            trashcan: true,
            toolboxOptions:
              {
                color: true,
                inverted: true
              },
            zoom:
              {
                controls: true,
                wheel: true,
                startScale: 1.0,
                maxScale: 4,
                minScale: .25,
                scaleSpeed: 1.1
              }
          });
        }
  </script>

  <body onload="iniciar_blockly(); iniciar_pilas()">
    <div class="flex">
      <div class="pa">
        <div id="game"></div>
      </div>
      <div id="blockly" class="flex1"></div>
    </div>


    <xml id="toolbox" style="display: none">
      <block type="text"></block>
      <block type="image_datauri"></block>
      <block type="example_dropdown_images"></block>
    </xml>

  </body>
</html>
